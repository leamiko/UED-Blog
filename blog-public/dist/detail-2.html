<!DOCTYPE html><html lang="zh-Hans-CN"><head><meta charset="UTF-8"><title></title><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="stylesheet" href="./lib/bootstrap/bootstrap.min.css"><link rel="stylesheet" href="./css/public-header.css"><link rel="stylesheet" href="./css/detail.css"><link rel="stylesheet" href="./css/public-bottom.css"></head><body><div class="public-header"><nav class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#"><img src="./images/logo.png" alt="logo" width="16"></a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"><ul class="nav navbar-nav navbar-right"><li><a href="./index.html"><span>首页<i class="line"></i></span></a></li><li><a href="./article.html"><span>文章<i class="line"></i></span></a></li><li><a href="./about.html"><span>关于<i class="line"></i></span></a></li><li><a href="./brand.html"><span>品牌<i class="line"></i></span></a></li><li><a href="./recruit.html"><span>招聘<i class="line"></i></span></a></li><li><a href="./login.html"><span>登录<i class="line"></i></span></a></li></ul></div></div></nav></div><div class="article"><div class="container"><h3 class="text-center h3">JavaScript事件循环-event loop</h3><p class="article-info text-center h6">In：<span class="category">前端开发</span> on：2017-08-22 by：<span class="author">liuxichao</span></p><div class="article-content h5"><p>大家都知道，JavaScript是一门单线程非阻塞的脚本语言。单线程意味着JavaScript只有一个主线程来处理所有任务，而非阻塞则说明那些耗时的异步任务（如ajax请求、定时器、DOM事件等）不会阻塞javascript的代码执行</p><p>那么，单线程的JavaScript是如何去处理这些异步任务？很多人将js的异步处理理解为类似多线程的编程模式，其实这还是有很大差别的，要完全理解javascript的异步，就要了解js的运行核心-事件循环（event loop）</p><p>在介绍js的事件循环机制前，先介绍两个名词：</p><p></p><ul><li>js脚本第一次执行的时候，js引擎会解析这段代码，并将其中的代码按照执行顺序加入执行栈中，然后从头开始执行.</li><li>事件队列：一个存储着待执行任务（异步任务）的队列，其中任务严格按照先后顺序执</li></ul><p></p><p>事件循环的原理如下图，js脚本执行一段代码时，会将代码压入执行栈（call stack），并顺序执行，当遇到异步任务，会将任务挂起（pending）,继续执行后续代码，这样保证代码不会阻塞，当异步任务执行结束后，浏览器会将回调函数加入事件队列中（callback queue）.当执行栈（call stack）为空时，js引擎会不停的检查事件队列，如果事件队列不为空，则取出第一个任务到执行栈中执行，依次循环，直至事件队列为空</p><img src="./images/event_loop.png" alt="event loop" class="img-responsive"><p>有条件的童鞋可以科学上网，看一下youtube大神的视频讲解，非常精彩https://www.youtube.com/watch?v=8aGhZQkoFbQ</p><p>参考文章：</p><p></p><ul><li>https://www.cnblogs.com/dong-xu/p/7000163.html</li><li>https://www.cnblogs.com/cangqinglang/p/8967268.html</li></ul><p></p></div></div></div><div class="comment"><div class="container"><div class="all-comments"><h3 class="h4 comment-title">全部评论</h3><div class="media"><div class="media-left"><a href="#"><img class="media-object" src="./images/touxiang.png" alt="avatar" width="22"></a></div><div class="media-body"><h4 class="media-heading h5">Linux Story / 2017-08-22 / 14:43</h4><p class="h5">在一些工具类型的应用中尤其会遇到这个问题，结合场景，在用户需要的时候展示一个商业化的功能，是不会影响用户体验的。比如定完机票，展示一个预约接送机的功能；购买完团购卷展示一个能订位的APP； 产品的商业化不是必然会影响到用户体验，关键是给用户呈现的商业化对用户而言是不是有价值</p></div></div><div class="media"><div class="media-left"><a href="#"><img class="media-object" src="./images/touxiang.png" alt="avatar" width="22"></a></div><div class="media-body"><h4 class="media-heading h5">Linux Story / 2017-08-22 / 14:43</h4><p class="h5">在一些工具类型的应用中尤其会遇到这个问题，结合场景，在用户需要的时候展示一个商业化的功能，是不会影响用户体验的。比如定完机票，展示一个预约接送机的功能；购买完团购卷展示一个能订位的APP； 产品的商业化不是必然会影响到用户体验，关键是给用户呈现的商业化对用户而言是不是有价值</p></div></div></div><div class="post-comment"><h3 class="h4">发表评论</h3><form><textarea class="form-control" rows="3" placeholder="评论"></textarea> <input type="text" class="form-control" placeholder="姓名"> <button type="submit" class="btn btn-default btn-block h5">发表评论</button></form></div><div class="change"><a href="./detail.html" class="h5">上篇：交互设计中的默认值</a> <a href="./detail.html" class="h5">下篇：阅读好体验的准则：100% Easy-2-Read</a></div></div></div><div class="bottom" style="border-top: 1px solid #ddd;"><ul class="bottom-tab hidden-xs"><li><a href="./index.html" class="h6"><span class="text-uppercase">home</span><br>首页</a></li><li><a href="./article.html" class="h6"><span class="text-uppercase">article</span><br>文章</a></li><li><a href="./about.html" class="h6"><span class="text-uppercase">about</span><br>关于</a></li><li><a href="./brand.html" class="h6"><span class="text-uppercase">source</span><br>资源</a></li><li><a href="./recruit.html" class="h6"><span class="text-uppercase">recruit</span><br>招聘</a></li><li><a href="./login.html" class="h6"><span class="text-uppercase">login</span><br>登录</a></li></ul><div class="back-top"><a href="#" class="btn btn-default glyphicon glyphicon-menu-up"></a></div><p class="copyright h6 text-center">2014 All rights reserved. 青岛轮子软件科技有限公司 版权所有 法律声明 鲁ICP备14035434号-1</p></div><script src="./lib/jquery/jquery.min.js"></script><script src="./lib/bootstrap/bootstrap.min.js"></script><script src="./js/backtop.js"></script><script src="./js/detail.js"></script></body></html>